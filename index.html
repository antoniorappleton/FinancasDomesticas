<!DOCTYPE html>
<html lang="pt-PT">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#0ea5e9" />
    <title>by AppletonFinance</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="manifest" href="./manifest.json?v=4">

  </head>
  <body>
    <!-- Sprite de ícones (reutilizável em toda a app) -->
    <svg aria-hidden="true" focusable="false" width="0" height="0" style="position:absolute;left:-9999px;top:-9999px">
      <!-- carteira / marca -->
      <symbol id="i-wallet" viewBox="0 0 24 24">
        <path fill="currentColor" d="M3 7.5A2.5 2.5 0 0 1 5.5 5H17a2 2 0 0 1 2 2v1h1.5A2.5 2.5 0 0 1 23 10.5v7A2.5 2.5 0 0 1 20.5 20h-15A2.5 2.5 0 0 1 3 17.5v-10Zm14-1.5H5.5A1.5 1.5 0 0 0 4 7.5V8h13V6Z"/>
        <circle cx="18.5" cy="14.5" r="1.5" fill="currentColor"/>
      </symbol>

      <!-- home -->
      <symbol id="i-home" viewBox="0 0 24 24">
        <path fill="currentColor" d="M3 10.2 12 3l9 7.2V20a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1v-9.8Z"/>
      </symbol>

      <!-- lista / transações -->
      <symbol id="i-list" viewBox="0 0 24 24">
        <path fill="currentColor" d="M4 6h16v2H4zM4 11h16v2H4zM4 16h16v2H4z"/>
      </symbol>

      <!-- mais / nova -->
      <symbol id="i-plus" viewBox="0 0 24 24">
        <path fill="currentColor" d="M10 4h4v6h6v4h-6v6h-4v-6H4v-4h6V4z"/>
      </symbol>

      <!-- definições -->
      <symbol id="i-cog" viewBox="0 0 24 24">
        <path fill="currentColor" d="M12 8.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7Zm9 3.5a7.3 7.3 0 0 0-.1-1l2-1.6-2-3.4-2.4.8a7.7 7.7 0 0 0-1.7-1l-.3-2.5H9.5l-.3 2.5a7.7 7.7 0 0 0-1.7 1l-2.4-.8-2 3.4 2 1.6a7.3 7.3 0 0 0 0 2l-2 1.6 2 3.4 2.4-.8a7.7 7.7 0 0 0 1.7 1l.3 2.5h5.1l.3-2.5a7.7 7.7 0 0 0 1.7-1l2.4.8 2-3.4-2-1.6c.1-.3.1-.7.1-1Z"/>
      </symbol>
    </svg>

    <header class="app-header">
      <div class="app-header__inner">
        <a class="brand" href="#/" aria-label="Início">
          <span class="brand__logo" aria-hidden="true">
            <svg class="icon icon--lg"><use href="#i-wallet"></use></svg>
          </span>
          <span class="brand__text">
            <span class="brand__title">Gestão das FInanças Familiares</span>
            <span class="brand__subtitle">Gestão doméstica</span>
          </span>
        </a>
        <nav class="top-nav" aria-label="Navegação principal"></nav>
      </div>
    </header>

    <main id="app-main">
      <div id="outlet" class="outlet"></div>
    </main>

    <footer id="app-footer" class="app-footer" role="navigation" aria-label="Separadores">
      <a href="#/" class="foot-item" data-route="dashboard" aria-current="page">
        <svg class="foot-item__icon" aria-hidden="true"><use href="#i-home"></use></svg>
        <span class="foot-item__label">Dashboard</span>
      </a>
      <a href="#/transactions" class="foot-item" data-route="transactions">
        <svg class="foot-item__icon" aria-hidden="true"><use href="#i-list"></use></svg>
        <span class="foot-item__label">Transações</span>
      </a>
      <a href="#/new" class="foot-item foot-item--primary" data-route="new">
        <svg class="foot-item__icon" aria-hidden="true"><use href="#i-plus"></use></svg>
        <span class="foot-item__label">Nova</span>
      </a>
      <a href="#/settings" class="foot-item" data-route="settings">
        <svg class="foot-item__icon" aria-hidden="true"><use href="#i-cog"></use></svg>
        <span class="foot-item__label">Definições</span>
      </a>
    </footer>

    <!-- Login Overlay -->
    <section id="screen-login" class="auth-overlay hidden" aria-modal="true" role="dialog" aria-labelledby="auth-title">
      <div class="auth-card">
        <h2 id="auth-title">Entrar</h2>
        <form id="auth-form">
          <label>Email<input id="auth-email" type="email" autocomplete="username" required /></label>
          <label>Palavra-passe<input id="auth-password" type="password" autocomplete="current-password" required /></label>
          <button id="auth-submit" type="submit" class="btn btn--primary">Entrar</button>
        </form>
        <p class="auth-switch">
          <span id="auth-help">Ainda não tens conta?</span>
          <button id="auth-toggle" class="link" type="button">Criar conta</button>
        </p>
      </div>
    </section>

    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
      window.sb = supabase.createClient(
        window.SUPABASE_URL || "https://brakxcumzdleufrpyipm.supabase.co",
        window.SUPABASE_ANON_KEY || "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJyYWt4Y3VtemRsZXVmcnB5aXBtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2MTI1MzMsImV4cCI6MjA3NDE4ODUzM30.Y-zw1H1gTyJnFJ3lxbamY8hU1KOFG06ayLmXYMuVknA"
      );
    </script>

    <!-- SW
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("./sw.js").catch(console.error);
      }
    </script>-->

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4"></script>

    <!-- Router/App -->
    <script type="module" src="main.js"></script>

    <!-- Ativar estado ativo no footer (opcional, pequeno helper) -->
    <script>
      const setActiveTab = () => {
        const hash = location.hash || "#/";
        document.querySelectorAll(".foot-item").forEach(a => {
          a.toggleAttribute("aria-current", hash.startsWith(a.getAttribute("href")));
        });
      };
      window.addEventListener("hashchange", setActiveTab);
      window.addEventListener("DOMContentLoaded", setActiveTab);
    </script>
  </body>
</html>