<!-- ===== MODAL RELAT√ìRIO ===== -->
<section class="card">
  <h2 class="section-title">Relat√≥rios</h2>

  <!-- Filtro original (mantido) -->
  <div class="grid" style="grid-template-columns: repeat(4, minmax(0,1fr)); gap:10px">
    <label>
      Tipo
      <select id="rpt-type">
        <option value="monthly" selected>Mensal</option>
        <option value="range">Intervalo de meses</option>
        <option value="yearly">Anual</option>
      </select>
    </label>

    <label id="rpt-month-wrap">
      M√™s
      <input id="rpt-month" type="month" />
    </label>

    <label id="rpt-range-wrap" class="hidden">
      De (YYYY-MM)
      <input id="rpt-from" type="month" />
    </label>

    <label id="rpt-range2-wrap" class="hidden">
      At√© (YYYY-MM)
      <input id="rpt-to" type="month" />
    </label>

    <label id="rpt-year-wrap" class="hidden">
      Ano
      <input id="rpt-year" type="number" min="2000" max="2100" step="1" />
    </label>
  </div>

  <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:10px">
    <button id="btn-report-open" class="btn btn--primary">Abrir relat√≥rio‚Ä¶</button>
  </div>
</section>

<div id="report-overlay" class="hidden rpt-overlay" aria-hidden="true" tabindex="-1">
  <div class="rpt-modal" aria-labelledby="rpt-title">

    <!-- Header com logo + t√≠tulo + fechar (sticky) -->
    <div class="rep-header">
      <div class="rep-title">
        <img id="app-logo-img" class="rep-logo" src="/wisebudget_bk_wt.png" alt="Logo" />
        <div class="rep-title-text">
          <h2 id="rpt-title">Relat√≥rio Financeiro</h2>
          <span id="rpt-subtitle" class="rep-subtitle">by wisebudget</span>
        </div>
      </div>
      <button id="rpt-close" class="rpt-close" aria-label="Fechar">√ó</button>
    </div>

    <!-- Conte√∫do do relat√≥rio (zona scroll√°vel) -->
    <div class="rpt-content">

      <!-- Filtro no topo do modal (sincroniza com o filtro exterior) -->
      <div class="rpt-controls">
        <div class="rpt-controls__row">
          <label>
            Tipo
            <select id="rpt-type-inside">
              <option value="monthly" selected>Mensal</option>
              <option value="range">Intervalo de meses</option>
              <option value="yearly">Anual</option>
            </select>
          </label>
          <label id="rpt-month-inside-wrap">
            M√™s
            <input id="rpt-month-inside" type="month" />
          </label>
          <label id="rpt-from-inside-wrap" class="hidden">
            De
            <input id="rpt-from-inside" type="month" />
          </label>
          <label id="rpt-to-inside-wrap" class="hidden">
            At√©
            <input id="rpt-to-inside" type="month" />
          </label>
          <label id="rpt-year-inside-wrap" class="hidden">
            Ano
            <input id="rpt-year-inside" type="number" min="2000" max="2100" step="1" />
          </label>
        </div>
      </div>

      <!-- KPIs -->
      <div class="rpt-kpis">
        <div class="rpt-kpi">
          <div>Receitas</div><strong id="rpt-kpi-income">‚Ç¨ 0,00</strong>
        </div>
        <div class="rpt-kpi">
          <div>Despesas</div><strong id="rpt-kpi-expense">‚Ç¨ 0,00</strong>
        </div>
        <div class="rpt-kpi">
          <div>Poupan√ßas</div><strong id="rpt-kpi-savings">‚Ç¨ 0,00</strong>
        </div>
        <div class="rpt-kpi">
          <div>Saldo</div><strong id="rpt-kpi-balance">‚Ç¨ 0,00</strong>
        </div>
      </div>

      <!-- Gr√°ficos: Despesas por categoria & Fixas vs Vari√°veis (um em cima do outro) -->
      <div class="rpt-grid">
        <div class="rpt-card">
          <h3 class="rpt-card__title">Despesas por categoria</h3>
          <div class="chart"><canvas id="rpt-cat-pie"></canvas></div>
          <div id="rpt-cat-legend" class="rpt-legend"></div>
        </div>
        <div class="rpt-card">
          <h3 class="rpt-card__title">Fixas vs Vari√°veis</h3>
          <div class="chart"><canvas id="rpt-fixed-donut"></canvas></div>
          <div id="rpt-fv-legend" class="rpt-legend small"></div>
        </div>
      </div>

      <!-- S√©ries temporais -->
      <div class="rpt-card">
        <h3 class="rpt-card__title">Evolu√ß√£o mensal (receitas, despesas, poupan√ßas, saldo)</h3>
        <div class="chart chart--tall"><canvas id="rpt-series"></canvas></div>
      </div>

      <!-- Tabelas -->
      <div class="rpt-grid rpt-grid--tables">
        <div class="rpt-card">
          <h3 class="rpt-card__title">Receitas por categoria</h3>
          <div class="rpt-table-wrap">
            <table id="tbl-income-cat"></table>
          </div>
        </div>
        <div class="rpt-card">
          <h3 class="rpt-card__title">Despesas por categoria</h3>
          <div class="rpt-table-wrap">
            <table id="tbl-expense-cat"></table>
          </div>
        </div>
        <div class="rpt-card">
          <h3 class="rpt-card__title">Resumo mensal & liquidez</h3>
          <div class="rpt-table-wrap">
            <table id="tbl-monthly"></table>
          </div>
        </div>
        <div class="rpt-card">
          <h3 class="rpt-card__title">Despesas por regularidade</h3>
          <div class="chart"><canvas id="rpt-regularity"></canvas></div>
        </div>
      </div>

      <!-- Top 6 despesas (barras horizontais) -->
      <div class="rpt-card">
        <h3 class="rpt-card__title">Top 6 categorias de despesa</h3>
        <div class="chart"><canvas id="rpt-top-exp"></canvas></div>
      </div>

      <!-- Linhas de percentagens -->
      <div class="rpt-card">
        <div style="display:grid;grid-template-columns:1fr;gap:12px">
          <div>
            <h3 class="rpt-card__title">Taxa de esfor√ßo mensal</h3>
            <div class="chart"><canvas id="rpt-effort"></canvas></div>
          </div>
          <div>
            <h3 class="rpt-card__title">Taxa de poupan√ßa mensal</h3>
            <div class="chart"><canvas id="rpt-savings-rate"></canvas></div>
          </div>
        </div>
      </div>

      <!-- Insights / Alertas -->
      <ul id="rpt-insights" class="rpt-insights"></ul>

      <div class="rpt-actions">
        <button id="rpt-export" class="btn">Exportar PDF</button>
      </div>

    </div><!-- /.rpt-content -->
  </div>
</div>


<style>
  .hidden {
    display: none
  }

  /* Overlay + modal */
  .rpt-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, .5);
    display: flex;
    align-items: flex-start;
    justify-content: center;
    overflow: auto;
    padding: 24px;
    z-index: 1000;
  }

  .rpt-modal {
    background: #fff;
    width: min(1100px, 92vw);
    border-radius: 16px;
    padding: 16px 20px 28px;
    position: relative;
    color: #111;
  }

  /* Header com logo */
  /* Cabe√ßalho fixo no topo do modal */
  .rpt-modal-header {
    position: sticky;
    top: 0;
    background: #fff;
    padding: 12px 16px;
    border-bottom: 1px solid #eee;
    z-index: 10;
    text-align: center;
  }

  .rpt-modal-header h2 {
    font-size: 18px;
    font-weight: 600;
    margin: 0;
    color: #111;
  }

  .rpt-modal-header span {
    display: block;
    font-size: 14px;
    color: #777;
  }

  .rep-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 120px;
    margin: -8px -4px 8px;
  }

  .rep-title {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .rep-title h2 {
    font-size: 1.25rem;
    line-height: 1;
    margin: 0;
  }

  .rep-logo {
    height: 40px;
    width: auto;
    display: block;
  }

  /* queres maior? sobe para 34‚Äì40px: */
  @media (min-width: 720px) {
    .rep-logo {
      height: 40px;
    }

    .rep-title h2 {
      font-size: 1.35rem;
    }
  }

  .rpt-close {
    font-size: 22px;
    line-height: 1;
    background: transparent;
    border: 0;
    cursor: pointer
  }

  /* Controles + KPIs */
  .rpt-controls {
    background: #f8fafc;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 8px 10px;
    margin: 8px 0 12px
  }

  .rpt-controls__row {
    display: grid;
    grid-template-columns: repeat(5, minmax(0, 1fr));
    gap: 10px
  }

  .rpt-kpis {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin: 12px 0
  }

  .rpt-kpi {
    background: #f8fafc;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 10px
  }

  /* Cart√µes do relat√≥rio */
  .rpt-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 16px
  }

  /* pizzas empilhadas */
  .rpt-grid--tables {
    grid-template-columns: 1fr
  }

  /* tabelas empilhadas tamb√©m; muda para 2fr 2fr se quiseres lado a lado */
  .rpt-card {
    background: #fff;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 12px
  }

  .rpt-card__title {
    margin: 0 0 8px 0;
    font-size: 14px
  }

  /* Chart wrapper ‚Äî evita ‚Äúcrescimento infinito‚Äù */
  .chart {
    position: relative;
    width: 100%;
    height: 260px;
  }

  .chart.chart--tall {
    height: 320px
  }

  .chart.chart--short {
    height: 220px
  }

  .chart>canvas {
    position: absolute;
    inset: 0;
    width: 100% !important;
    height: 100% !important;
    display: block;
  }

  /* Legendas */
  .rpt-legend {
    margin-top: 6px
  }

  .rpt-legend.small {
    font-size: 12px
  }

  .rpt-legend__item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 4px 0
  }

  .rpt-legend__dot {
    width: 10px;
    height: 10px;
    border-radius: 50%
  }

  /* Tabelas */
  .rpt-table-wrap {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    /* scroll suave em iOS */
    max-width: 100%;
  }

  .rpt-table-wrap table {
    width: 100%;
    min-width: 560px;
    border-collapse: collapse;
    font-size: 13px
  }

  .rpt-table-wrap th,
  .rpt-table-wrap td {
    padding: 6px 8px;
    white-space: nowrap;
    border-bottom: 1px solid #e5e7eb;
    text-align: right;
    white-space: nowrap
  }

  .rpt-table-wrap th:first-child,
  .rpt-table-wrap td:first-child {
    text-align: left
  }

  /* Insights */
  .rpt-insights {
    margin: 10px 0 0 0;
    padding-left: 18px
  }

  .rpt-insights li {
    margin: 4px 0
  }

  .btn {
    padding: 8px 12px;
    border: 1px solid #334155;
    border-radius: 10px;
    background: #111827;
    color: #e5e7eb;
  }

  /* Responsivo */
  @media (max-width: 900px) {
    .rpt-controls__row {
      grid-template-columns: 1fr 1fr
    }

    .rpt-kpis {
      grid-template-columns: 1fr 1fr
    }
  }

  /* Print A4 vertical */
  @media print {
    body {
      background: #fff
    }

    .rpt-overlay {
      position: static;
      inset: auto;
      background: #fff;
      padding: 0
    }

    .rpt-modal {
      width: auto;
      box-shadow: none;
      padding: 0;
      border: none
    }

    .rpt-close,
    .rpt-actions {
      display: none
    }

    .rpt-controls {
      border: none;
      background: #fff
    }

    .rpt-card {
      page-break-inside: avoid
    }
  }

  /* Gr√°ficos pizza for√ßa 1:1 e evita crescer sem controlo */
  #rpt-cat-pie,
  #rpt-fixed-donut {
    aspect-ratio: 1 / 1;
    width: 100% !important;
    height: auto !important;
    max-height: 320px;
    /* ajusta √† vontade (280‚Äì360) */
    display: block;
  }

  /* Modal: altura limitada e scroll interno no telem√≥vel */
  .rpt-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, .5);
    display: flex;
    align-items: flex-start;
    justify-content: center;
    overflow: auto;
    padding: 16px;
    /* menos padding em mobile */
    z-index: 1000;
  }

  /* Garantir que os charts nunca passam os limites */
  .chart {
    position: relative;
    width: 100%;
    max-width: 100%;
    height: 260px;
  }

  .chart.chart--tall {
    height: 320px;
  }

  .chart>canvas {
    position: absolute;
    inset: 0;
    width: 100% !important;
    height: 100% !important;
    display: block;
    max-width: 100%;
  }

  /* Pizzas 1:1 sem ‚Äúexplodir‚Äù em altura */
  #rpt-cat-pie,
  #rpt-fixed-donut {
    aspect-ratio: 1 / 1;
    width: 100% !important;
    height: auto !important;
    max-height: 320px;
    display: block;
  }

  .rpt-modal {
    background: #fff;
    width: min(1100px, 92vw);
    max-height: 92svh;
    /* <- chave: limita altura vis√≠vel */
    overflow: auto;
    /* <- scroll acontece dentro do modal */
    border-radius: 16px;
    padding: 16px 16px 24px;
    position: relative;
    color: #111;
    box-sizing: border-box;
  }

  /* Evita overflow lateral por causa de margins internas */
  .rpt-modal * {
    min-width: 0;
    box-sizing: border-box;
  }
</style>

<!-- ===== sec√ß√£o categorias ===== -->
<section class="card">
  <h2 class="section-title">Categorias</h2>
  <p>Cria, edita ou remove as tuas categorias e subcategorias.</p>
  <a href="#/categories" class="btn btn--primary">Gerir categorias</a>
</section>

<!-- ===== APAR√äNCIA ===== -->
<section class="card">
  <h2 class="section-title">Apar√™ncia</h2>
  <p>Personalize as cores e o tema da aplica√ß√£o.</p>
  <button id="btn-theme-open" class="btn btn--primary">Personalizar Tema</button>
</section>

<!-- Sess√£o -->
<section class="card" id="card-session" style="margin-top:12px">
  <h2 class="section-title">Sess√£o</h2>
  <div class="grid" style="grid-template-columns:2fr 1fr;gap:10px;align-items:end">
    <div>
      <div class="row-note">Autenticado como:</div>
      <div id="sess-user-email" style="font-weight:700">‚Äî</div>
    </div>
    <div style="text-align:right">
      <button id="btn-logout" class="btn">Terminar sess√£o</button>
    </div>
  </div>
</section>

<!-- Gerir os mini cards -->
<section class="card">
  <h2 class="section-title">Mini-cards ocultos</h2>
  <p class="row-note">Aqui aparecem os mini-cards que ocultaste da Dashboard. Podes voltar a ativ√°-los.</p>
  <div id="mini-shelf" class="mini-shelf" style="display:flex; gap:8px; flex-wrap:wrap"></div>
</section>


<!-- Alterar palavra-passe -->
<section id="sec-password" class="card">
  <h3 class="section-title">Alterar palavra-passe</h3>
  <div class="grid" style="grid-template-columns:1fr;gap:10px">
    <label>Nova palavra-passe
      <input id="set-new-pass" type="password" autocomplete="new-password" />
    </label>
    <label>Confirmar nova palavra-passe
      <input id="set-new-pass-2" type="password" autocomplete="new-password" />
    </label>
  </div>
  <div style="display:flex;gap:10px;margin-top:12px">
    <button id="btn-change-pass" class="btn btn--primary">Atualizar</button>
  </div>
  <div id="set-msg" class="row-note" style="margin-top:8px"></div>
</section>

<!-- ===== GEST√ÉO DE DADOS (Delete) ===== -->
<section class="card" style="border-color:var(--red-100)">
  <h2 class="section-title">Gest√£o de Dados</h2>
  <p class="row-note">Eliminar dados avulso. Cuidado: esta a√ß√£o √© irrevers√≠vel.</p>
  
  <div class="grid" style="grid-template-columns:1fr auto; gap:10px; align-items:end; margin-top:12px">
    <label>
      Eliminar movimentos de:
      <input id="del-month" type="month" />
    </label>
    <button id="btn-del-month" class="btn" style="background:var(--red-500); color:#fff; border:none">Eliminar</button>
  </div>
</section>

<!-- ===== MODAL/SEC√á√ÉO IMPORTA√á√ÉO ===== -->
<section class="card">
  <h2 class="section-title">Importa√ß√£o de Extrato (BETA)</h2>
  <p class="row-note">Importa transa√ß√µes via PDF ou CSV (Excel). Suporta Millennium, ActivoBank, Santander, etc.</p>

  <div class="form-grid" style="margin-top:12px">
    <label>
      Ficheiro (PDF ou CSV)
      <input id="imp-file" type="file" accept=".pdf,.csv,text/csv,application/pdf" />
    </label>
    <!-- M√™s √© opcional para PDF pois tem datas, mas √∫til para override -->
    <label>
      Conta Destino
      <select id="imp-account">
        <!-- preenchido via JS -->
      </select>
    </label>
  </div>

  <div class="actions" style="margin-top:8px">
    <button id="imp-process" class="btn btn--primary">Processar Ficheiro</button>
    <button id="imp-clear" class="btn">Limpar</button>
  </div>

  <p id="imp-info" class="row-note" style="margin-top:8px"></p>

  <div id="imp-review-area" class="card soft" style="margin-top:12px; display:none; background:#f8fafc; border:1px solid #e2e8f0">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px">
      <h3 class="section-title" style="margin:0; font-size:16px">Revis√£o</h3>
      <div style="font-size:12px; color:var(--muted)">Assinale as transa√ß√µes a importar</div>
    </div>
    
    <div style="max-height:400px; overflow-y:auto; padding-right:4px">
        <div id="imp-list" style="display:grid; gap:8px"></div>
    </div>

    <div style="margin-top:12px; padding-top:12px; border-top:1px solid #ddd; text-align:right">
       <button id="imp-confirm" class="btn btn--primary" disabled>Confirmar Importa√ß√£o</button>
    </div>
  </div>
</section>





<!-- ===== OR√áAMENTO DE ESTADO ===== -->
<section class="card">
  <h2 class="section-title">Or√ßamento de Estado</h2>
  <p>Gera um or√ßamento anual com base nas tuas despesas fixas do ano anterior.</p>
  <div style="display:flex;gap:10px;align-items:center;margin-top:12px">
    <label style="flex:1;max-width:150px">
      Ano Alvo
      <input id="bud-target-year" type="number" min="2020" max="2100" step="1" />
    </label>
    <button id="btn-budget-open" class="btn btn--primary" style="margin-top:14px">Gerar Or√ßamento</button>
  </div>
</section>

<!-- ===== MODAL OR√áAMENTO ===== -->
<div id="budget-overlay" class="hidden rep-overlay" aria-hidden="true" tabindex="-1">
  <div class="rep-modal" style="width:min(800px,92vw)">
    <div class="rep-header" style="display:flex;justify-content:space-between;align-items:center">
      <h2 id="bud-title">Or√ßamento de Estado</h2>
      <button id="bud-close" class="rpt-close" aria-label="Fechar">√ó</button>
    </div>

    <div class="rep-body" style="padding-top:10px">
      <div id="bud-summary"
        style="display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;margin-bottom:20px;text-align:center">
        <!-- Summary populated by JS -->
      </div>

      <div class="rpt-table-wrap">
        <table id="bud-table" style="width:100%;border-collapse:collapse">
          <thead>
            <tr style="border-bottom:2px solid #ddd;text-align:left">
              <th style="padding:8px">Categoria</th>
              <th style="padding:8px;text-align:right">Base (Ano Ant.)</th>
              <th style="padding:8px;text-align:right">Proposto</th>
              <th style="padding:8px;text-align:center">Fixar</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="alert warn hidden" id="bud-warn" style="margin-top:10px;font-size:13px"></div>

      <div class="actions" style="margin-top:20px;justify-content:flex-end;display:flex;gap:10px">
        <button id="bud-cancel" class="btn">Cancelar</button>
        <button id="bud-save" class="btn btn--primary">Guardar Or√ßamento</button>
      </div>
      <p class="row-note" style="text-align:right;margin-top:5px">
        Guardar cria metas mensais ("budget_cap") para estas categorias.
      </p>
    </div>
  </div>
</div>
</div>

<!-- ===== MODAL TEMA ===== -->
<div id="theme-overlay" class="hidden rep-overlay" aria-hidden="true" tabindex="-1">
  <div class="rep-modal" style="width:min(500px,92vw)">
    <div class="rep-header" style="justify-content:space-between">
      <h2 style="font-size:1.2rem;font-weight:700">Personalizar Tema</h2>
      <button id="theme-close" class="rpt-close" aria-label="Fechar">√ó</button>
    </div>
    <div class="rep-body" style="padding-top:10px; display:grid; gap:20px">

      <p class="row-note">As altera√ß√µes s√£o guardadas automaticamente no seu dispositivo.</p>

      <!-- Grupo: Fundo Global (Novo) -->
      <div>
        <h3 class="row-note" style="margin-bottom:8px; border-bottom:1px solid #e5e7eb; padding-bottom:4px">Fundo Global
        </h3>
        <label style="display:grid; font-size:13px; gap:4px; margin-bottom:10px">
          <span>Imagem de Fundo (URL ou Upload)</span>
          <div style="display:flex; gap:8px; align-items:center">
            <input type="text" id="thm-bg-url" placeholder="https://..."
              style="flex:1; border:1px solid #ddd; border-radius:6px; padding:6px; font-size:12px" />
            <label class="btn" style="padding:4px 8px; font-size:12px; cursor:pointer" title="Upload Ficheiro">
              üìÇ
              <input type="file" id="thm-bg-file" accept="image/jpeg, image/png, image/webp" style="display:none" />
            </label>
            <button id="thm-bg-clear" class="btn" style="padding:4px 8px; font-size:12px"
              title="Remover imagem">√ó</button>
          </div>
          <small id="thm-bg-status" class="row-note" style="color:var(--muted)">Carregar ficheiro ou colar URL</small>
        </label>

        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px">
          <label style="display:grid; font-size:13px; gap:4px">
            <span>Cor Pel√≠cula (Overlay)</span>
            <input type="color" id="thm-overlay-col" value="#000000"
              style="width:100%; height:32px; border:1px solid #ddd; padding:0; border-radius:6px; cursor:pointer;" />
          </label>
          <label style="display:grid; font-size:13px; gap:4px">
            <div style="display:flex; justify-content:space-between">
              <span>Opacidade</span>
              <span id="thm-overlay-op-val" style="color:var(--muted)">0.35</span>
            </div>
            <input type="range" id="thm-overlay-op" min="0" max="1" step="0.05" value="0.35" />
          </label>
          <label style="display:grid; font-size:13px; gap:4px; grid-column:span 2">
            <div style="display:flex; justify-content:space-between">
              <span>Blur (Fundo)</span>
              <span id="thm-overlay-blur-val" style="color:var(--muted)">0px</span>
            </div>
            <input type="range" id="thm-overlay-blur" min="0" max="20" step="1" value="0" />
          </label>
        </div>
      </div>

      <!-- Grupo: Interface Base -->
      <div>
        <h3 class="row-note" style="margin-bottom:8px; border-bottom:1px solid #e5e7eb; padding-bottom:4px">Interface
          Base</h3>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px">
          <label style="display:grid; font-size:13px; gap:4px">
            <span>Fundo (Background)</span>
            <input type="color" id="thm-bg" value="#f0f2f5"
              style="width:100%; height:32px; border:1px solid #ddd; padding:0; border-radius:6px; cursor:pointer;" />
          </label>
          <label style="display:grid; font-size:13px; gap:4px">
            <span>Surface / Cards</span>
            <input type="color" id="thm-card" value="#ffffff"
              style="width:100%; height:32px; border:1px solid #ddd; padding:0; border-radius:6px; cursor:pointer;" />
          </label>
          <label style="display:grid; font-size:13px; gap:4px">
            <label style="display:grid; font-size:13px; gap:4px">
              <span>Bordas / Borders</span>
              <input type="color" id="thm-border" value="#e2e8f0"
                style="width:100%; height:32px; border:1px solid #ddd; padding:0; border-radius:6px; cursor:pointer;" />
            </label>
            <label style="display:grid; font-size:13px; gap:4px; grid-column:span 2">
              <div style="display:flex; justify-content:space-between">
                <span>Opacidade Cart√µes</span>
                <span id="thm-opacity-val" style="color:var(--muted)">0.75</span>
              </div>
              <input type="range" id="thm-opacity" min="0.0" max="1" step="0.05" value="0.75" />
            </label>
        </div>
      </div>

      <!-- Grupo: Tipografia -->
      <div>
        <h3 class="row-note" style="margin-bottom:8px; border-bottom:1px solid #e5e7eb; padding-bottom:4px">Tipografia
        </h3>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px">
          <label style="display:grid; font-size:13px; gap:4px">
            <span>Texto Principal</span>
            <input type="color" id="thm-text" value="#1e293b"
              style="width:100%; height:32px; border:1px solid #ddd; padding:0; border-radius:6px; cursor:pointer;" />
          </label>
          <label style="display:grid; font-size:13px; gap:4px">
            <span>Texto Secund√°rio</span>
            <input type="color" id="thm-muted" value="#64748b"
              style="width:100%; height:32px; border:1px solid #ddd; padding:0; border-radius:6px; cursor:pointer;" />
          </label>
        </div>
      </div>

      <!-- Grupo: Marca e Navega√ß√£o -->
      <div>
        <h3 class="row-note" style="margin-bottom:8px; border-bottom:1px solid #e5e7eb; padding-bottom:4px">Marca e
          Navega√ß√£o</h3>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px">
          <label style="display:grid; font-size:13px; gap:4px">
            <span>Cabe√ßalho (Header)</span>
            <input type="color" id="thm-header" value="#0f172a"
              style="width:100%; height:32px; border:1px solid #ddd; padding:0; border-radius:6px; cursor:pointer;" />
          </label>
          <label style="display:grid; font-size:13px; gap:4px">
            <span>Bot√£o Menu (FAB)</span>
            <input type="color" id="thm-fab" value="#0f766e"
              style="width:100%; height:32px; border:1px solid #ddd; padding:0; border-radius:6px; cursor:pointer;" />
          </label>
        </div>
      </div>

      <!-- Grupo: Status Financeiro -->
      <div>
        <h3 class="row-note" style="margin-bottom:8px; border-bottom:1px solid #e5e7eb; padding-bottom:4px">Cores de
          Status</h3>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px">
          <label style="display:grid; font-size:13px; gap:4px">
            <span>Receita (Income)</span>
            <input type="color" id="thm-income" value="#16a34a"
              style="width:100%; height:32px; border:1px solid #ddd; padding:0; border-radius:6px; cursor:pointer;" />
          </label>
          <label style="display:grid; font-size:13px; gap:4px">
            <span>Despesa (Expense)</span>
            <input type="color" id="thm-expense" value="#ef4444"
              style="width:100%; height:32px; border:1px solid #ddd; padding:0; border-radius:6px; cursor:pointer;" />
          </label>
          <label style="display:grid; font-size:13px; gap:4px">
            <span>Poupan√ßa (Savings)</span>
            <input type="color" id="thm-savings" value="#2563eb"
              style="width:100%; height:32px; border:1px solid #ddd; padding:0; border-radius:6px; cursor:pointer;" />
          </label>
          <label style="display:grid; font-size:13px; gap:4px">
            <span>Saldo (Balance)</span>
            <input type="color" id="thm-balance" value="#065f46"
              style="width:100%; height:32px; border:1px solid #ddd; padding:0; border-radius:6px; cursor:pointer;" />
          </label>
        </div>
      </div>

      <!-- Grupo: Avan√ßado -->
      <div>
        <h3 class="row-note" style="margin-bottom:8px; border-bottom:1px solid #e5e7eb; padding-bottom:4px">Detalhes /
          Avan√ßado</h3>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px">
          <label style="display:grid; font-size:13px; gap:4px">
            <span>Intensidade Sombra</span>
            <select id="thm-shadow" style="padding:6px; border-radius:6px; border:1px solid #cbd5e1">
              <option value="none">Nenhuma</option>
              <option value="soft" selected>Suave (Padr√£o)</option>
              <option value="medium">M√©dia</option>
              <option value="strong">Forte</option>
            </select>
          </label>
          <label style="display:grid; font-size:13px; gap:4px">
            <span>Bot√µes Gradiente</span>
            <select id="thm-btn-style" style="padding:6px; border-radius:6px; border:1px solid #cbd5e1">
              <option value="flat">N√£o (Cor S√≥lida)</option>
              <option value="gradient">Sim (Gradiente)</option>
            </select>
          </label>

          <label style="display:grid; font-size:13px; gap:4px; grid-column:span 2">
            <div style="display:flex; justify-content:space-between">
              <span>Blur (Glassmorphism)</span>
              <span id="thm-blur-val" style="color:var(--muted)">12px</span>
            </div>
            <input type="range" id="thm-blur" min="0" max="30" step="2" value="12" />
          </label>
          <label style="display:grid; font-size:13px; gap:4px; grid-column:span 2">
            <span>Cor Fundo Cart√µes (RGBA)</span>
            <!-- Substitui/Complementa o thm-card picker -->
            <input type="text" id="thm-card-bg-text" placeholder="rgba(255, 255, 255, 0.92)"
              style="width:100%; border:1px solid #ddd; border-radius:6px; padding:6px" />
            <small class="row-note">Ex: rgba(255, 255, 255, 0.9)</small>
          </label>
        </div>
      </div>

      <div style="border-top:1px solid #e5e7eb; padding-top:16px;">
        <label style="display:flex; justify-content:space-between; align-items:center; cursor:pointer">
          <span style="font-weight:600">Modo Escuro (BETA)</span>
          <input type="checkbox" id="thm-dark" style="width:20px;height:20px" />
        </label>
      </div>

      <div class="actions" style="margin-top:0; justify-content:flex-end">
        <button id="thm-reset" class="btn" style="color:#ef4444">Restaurar Padr√£o</button>
        <button id="thm-save" class="btn btn--primary">Conclu√≠do</button>
      </div>

    </div>
  </div>
</div>





<script type="module" src="/src/main.js?v=v7"></script>