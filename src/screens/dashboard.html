<section class="card">
  <h2 class="section-title">
    Resumo do mês
    <!-- Botão “olho” (novo) -->
    <button id="kpi-privacy-toggle"
            class="icon-btn"
            title="Ocultar/mostrar valores"
            aria-pressed="false"
            aria-label="Ocultar valores"
            style="float:right; display:inline-flex; align-items:center; gap:6px; padding:6px 8px; border-radius:10px;">
      <svg aria-hidden="true" width="20" height="20">
        <use href="#i-eye"></use>
      </svg>
      <span class="sr-only"></span>
    </button>
  </h2>

  <div class="grid kpi">
    <div class="kpi kpi--income">
      <div class="kpi__title">Receitas</div>
      <div id="kpi-income" class="kpi__value">€ 0,00</div>
      <div><span id="kpi-income-trend" class="pill">+0.0%</span></div>
    </div>

    <div class="kpi kpi--expense">
      <div class="kpi__title">Despesas</div>
      <div id="kpi-expense" class="kpi__value">€ 0,00</div>
      <div><span id="kpi-expense-trend" class="pill">+0.0%</span></div>
    </div>

    <div class="kpi kpi--savings">
      <div class="kpi__title">Poupanças</div>
      <div id="kpi-savings" class="kpi__value">€ 0,00</div>
      <div><span id="kpi-savings-trend" class="pill">+0.0%</span></div>
    </div>

    <div class="kpi kpi--balance">
      <div class="kpi__title">Saldo líquido</div>
      <div id="kpi-balance" class="kpi__value">€ 0,00</div>
      <div><span id="kpi-net-trend" class="pill">+0.0%</span></div>
    </div>
  </div>
</section>

<!-- Modal genérico de detalhe -->
<div id="dash-modal" class="modal" hidden>
  <div class="modal__card">
    <header class="modal__header">
      <h3 class="modal__title" id="dash-modal-title">Detalhe</h3>
      <button class="modal__close" type="button" aria-label="Fechar">×</button>
    </header>

    <div class="chart chart--tall">
      <canvas id="dash-modal-canvas"></canvas>
    </div>

    <!-- espaço extra para legendas/listas quando necessário -->
    <div id="dash-modal-extra" class="rpt-legend" style="margin-top:10px"></div>

    <div class="actions" style="margin-top:10px">
      <button class="btn" id="dash-modal-close">Fechar</button>
    </div>
  </div>
</div>

<section class="card" data-collapsible data-key="upcoming-fixed">
  <h2 class="section-title">Próximas despesas (30 dias)</h2>
  <div id="upcoming-fixed-list" class="cat-list"></div>
  <p class="row-note">Baseado nos pagamentos fixos do período homólogo anterior.</p>
</section>

<section class="card">
  <h2 class="section-title">Análises rápidas</h2>
  <div class="dash-mini">
    <button class="mini-card" data-chart="cashflow" aria-controls="dash-modal">
      <span class="mini-card__title">Cashflow anual (Anual atual)</span>
      <span class="mini-card__hint">Abrir gráfico</span>
    </button>

    <button class="mini-card" data-chart="tendencias" aria-controls="dash-modal">
      <span class="mini-card__title">Tendências (12 meses)</span>
      <span class="mini-card__hint">Abrir gráfico</span>
    </button>

    <button class="mini-card" data-chart="fixvar_mes" aria-controls="dash-modal">
      <span class="mini-card__title">Fixas vs Variáveis (mês atual)</span>
      <span class="mini-card__hint">Abrir donut</span>
    </button>

    <button class="mini-card" data-chart="fixvar_12m" aria-controls="dash-modal">
      <span class="mini-card__title">Fixas vs Variáveis (12 meses)</span>
      <span class="mini-card__hint">Abrir barras</span>
    </button>

    <button class="mini-card" data-chart="categorias" aria-controls="dash-modal">
      <span class="mini-card__title">Despesas por categoria (ano atual)</span>
      <span class="mini-card__hint">Abrir pizza</span>
    </button>

    <button class="mini-card" data-chart="top_categorias" aria-controls="dash-modal">
      <span class="mini-card__title">Top categorias (mês atual)</span>
      <span class="mini-card__hint">Abrir barras</span>
    </button>

    <button class="mini-card" data-chart="gasto_diario" aria-controls="dash-modal">
      <span class="mini-card__title">Gasto diário acumulado (mês atual)</span>
      <span class="mini-card__hint">Abrir linha</span>
    </button>

    <button class="mini-card" data-chart="metodos" aria-controls="dash-modal">
      <span class="mini-card__title">Métodos de pagamento (4 meses)</span>
      <span class="mini-card__hint">Abrir barras</span>
    </button>

    <button class="mini-card" data-chart="regularidades" aria-controls="dash-modal">
      <span class="mini-card__title">Regularidades (mês atual)</span>
      <span class="mini-card__hint">Abrir barras</span>
    </button>
  </div>
</section>

<section class="card" data-collapsible data-key="cashflow">
  <h2 class="section-title">Análise Detalhada por Categoria</h2>
  <div id="cat-list" class="cat-list"></div>
</section>
