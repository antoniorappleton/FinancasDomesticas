<section class="card">
  <h2 class="section-title">Nova transação</h2>

  <!-- Tipo -->
  <div class="grid" style="grid-template-columns:repeat(2,minmax(0,1fr));gap:8px">
    <label class="btn" style="display:flex;align-items:center;gap:8px">
      <input type="radio" name="tx-type" value="INCOME" checked />
      <span>Receita</span>
    </label>
    <label class="btn" style="display:flex;align-items:center;gap:8px">
      <input type="radio" name="tx-type" value="EXPENSE" />
      <span>Despesa</span>
    </label>
    <label class="btn" style="display:flex;align-items:center;gap:8px">
      <input type="radio" name="tx-type" value="SAVINGS" />
      <span>Poupança</span>
    </label>
    <label class="btn" style="display:flex;align-items:center;gap:8px">
      <input type="radio" name="tx-type" value="TRANSFER" />
      <span>Transferência</span>
    </label>
  </div>

  <!-- Data + Valor -->
  <div class="grid" style="grid-template-columns:1fr 1fr;gap:10px;margin-top:10px">
    <label>Data
      <input id="tx-date" type="date" />
    </label>
    <label>Valor
      <input id="tx-amount" type="number" step="0.01" inputmode="decimal" placeholder="0,00" />
    </label>
  </div>

  <!-- Conta (uma) -->
  <div id="row-account-single" class="grid" style="grid-template-columns:1fr;gap:10px;margin-top:10px">
    <label>Conta
      <select id="tx-account"></select>
    </label>
  </div>

  <!-- Contas (transfer) -->
  <div id="row-account-transfer" class="grid hidden" style="grid-template-columns:1fr 1fr;gap:10px;margin-top:10px">
    <label>De
      <select id="tx-account-from"></select>
    </label>
    <label>Para
      <select id="tx-account-to"></select>
    </label>
  </div>

  <!-- Categoria -->
  <div id="row-category" style="margin-top:10px">
    <!-- Select plano para Receita/Poupança (ou fallback) -->
    <label>Categoria
      <select id="tx-category"></select>
    </label>

    <!-- Bloco só para DESPESA -->
    <div id="exp-cat-wrap" class="hidden" style="margin-top:8px">
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
        <label>Categoria (pai)
          <select id="cat-parent"></select>
        </label>
        <label>Subcategoria
          <select id="cat-child"></select>
        </label>
      </div>
      <input type="hidden" id="tx-category-exp" />
    </div>
  </div>

  <!-- Natureza (apenas Despesa) -->
  <div id="row-nature" class="grid hidden" style="grid-template-columns:1fr;gap:10px;margin-top:10px">
    <label>Natureza da despesa</label>
    <div class="grid" style="grid-template-columns:1fr 1fr;gap:8px">
      <label class="btn" style="display:flex;align-items:center;gap:8px">
        <input type="radio" name="tx-nature" value="fixed" />
        <span>Fixa</span>
      </label>
      <label class="btn" style="display:flex;align-items:center;gap:8px">
        <input type="radio" name="tx-nature" value="variable" />
        <span>Variável</span>
      </label>
    </div>
  </div>

  <!-- Regularidade / Método / Estado -->
  <div class="grid" style="grid-template-columns:repeat(3,minmax(0,1fr));gap:10px;margin-top:10px">
    <label>Regularidade
      <select id="tx-regularity"></select>
    </label>
    <label>Método
      <select id="tx-method"></select>
    </label>
    <label>Estado
      <select id="tx-status"></select>
    </label>
  </div>

  <!-- Descrição / Localização / Notas -->
  <div class="grid" style="grid-template-columns:1fr 1fr;gap:10px;margin-top:10px">
    <label>Descrição
      <input id="tx-desc" type="text" placeholder="ex.: Supermercado, Ordenado, ..." />
    </label>
    <label>Localização
      <input id="tx-loc" type="text" placeholder="opcional" />
    </label>
  </div>
  <label style="margin-top:10px">Notas
    <textarea id="tx-notes" rows="3" placeholder="opcional"></textarea>
  </label>

  <div id="tx-msg" class="card" style="margin-top:10px;display:none"></div>
  <div style="display:flex;gap:10px;margin-top:12px">
    <button id="tx-save" class="btn btn--primary">Guardar</button>
    <button id="tx-clear" class="btn">Limpar</button>
  </div>
</section>

<style>
  /* styles.css — Wisebudget UI */
/* --------------------------------------------------------- */
/* Design tokens */
:root{
  /* Paleta da app */
  --bg: #0b1220;            /* fundo base */
  --surface: #0f172a11;       /* cartões/header */
  --surface-soft:#0c142623;
  --text: #e5e7eb;          /* texto principal */
  --muted:#a1a1aa;          /* texto secundário */

  --primary:#2563eb;        /* marca */
  --primary-600:#1d4ed8;
  --primary-700:#1e40af;

  --accent:#22c55e;         /* sucesso */
  --danger:#ef4444;         /* erro */
  --warning:#f59e0b;        /* aviso */
  --ring: rgba(37,99,235,.35);
  --border:#182235;

  /* Detalhe visual */
  --shadow: 0 12px 30px rgba(0,0,0,.35);
  --radius:14px;
  --radius-lg:18px;
  --pad:14px;
  --pad-lg:18px;

  --font: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
}

/* Reset mínimo */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:var(--font); color:var(--text);
  background: radial-gradient(1100px 700px at 10% -20%, #111827 0%, #0b1220 45%, #0a0f1a 100%);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

/* Header */
.app-header{
  position:sticky; top:0; z-index:20;
  background:rgba(15,23,42,.9); backdrop-filter:saturate(160%) blur(10px);
  border-bottom:1px solid var(--border);
}
.app-header__inner{display:flex;align-items:center;justify-content:space-between;gap:12px;max-width:1100px;margin:0 auto;padding:10px var(--pad)}
.brand{display:flex;align-items:center;gap:10px;color:inherit;text-decoration:none}
.brand__logo{width:34px;height:34px;object-fit:contain;filter:drop-shadow(0 4px 12px rgba(37,99,235,.25))}
.brand__title{font-weight:800;letter-spacing:.2px}
.brand__subtitle{color:var(--muted);font-size:.78rem}

/* Main */
#app-main{max-width:1100px;margin:10px auto 110px;padding:0 var(--pad)}
.card{
  background:linear-gradient(180deg, var(--surface) 0%, var(--surface-soft) 100%);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:var(--pad-lg);
  box-shadow:var(--shadow);
}
.section-title{margin:0 0 12px; font-size:1.12rem; font-weight:800; letter-spacing:.2px}

/* Footer tabs */
.app-footer{
  position:fixed;left:0;right:0;bottom:0;z-index:30;
  background:rgba(15,23,42,.92); backdrop-filter: blur(10px);
  border-top:1px solid var(--border);
  display:grid;grid-template-columns:repeat(4,1fr);
}
.foot-item{
  display:flex;flex-direction:column;align-items:center;gap:6px;
  padding:10px 4px;color:var(--muted);text-decoration:none;font-size:.78rem
}
.foot-item__icon{width:22px;height:22px}
.foot-item--primary{color:#fff}
.foot-item[aria-current="page"], .foot-item:hover{color:#fff}
.foot-item[aria-current="page"] .foot-item__icon{filter: drop-shadow(0 6px 18px rgba(240, 242, 245, 0.55))}
.foot-item--primary{
  background: linear-gradient(180deg, var(--primary) 0%, var(--primary-600) 100%);
  border-left:1px solid rgba(255,255,255,.06);
  border-right:1px solid rgba(255,255,255,.06)
}

/* Form controls */
label{display:flex;flex-direction:column;gap:6px;font-size:.88rem;color:#d7dce5}
input, select, textarea{
  width:100%; background:#0b1324; color:var(--text);
  border:1px solid var(--border); border-radius:12px;
  padding:12px 12px; outline:none; transition:border .15s, box-shadow .15s, background .2s;
}
input::placeholder, textarea::placeholder{color:#73819a}
input:focus, select:focus, textarea:focus{
  border-color:var(--primary);
  box-shadow:0 0 0 3px var(--ring);
  background:#0a1222;
}

/* Inline “pills” para radio/checkbox */
.btn{
  display:inline-flex;align-items:center;gap:8px;
  padding:10px 12px;border:1px solid var(--border);
  border-radius:12px;background:#0b1324;color:var(--text);
  cursor:pointer; user-select:none; transition:background .2s,border .2s, transform .04s;
}
.btn:hover{background:#0c172c}
.btn:active{transform:translateY(1px)}
.btn input[type="radio"], .btn input[type="checkbox"]{appearance:none;width:18px;height:18px;border-radius:999px;border:1px solid #2b3a55;background:#0b1324;display:inline-grid;place-items:center}
.btn input[type="radio"]::after,.btn input[type="checkbox"]::after{content:"";width:10px;height:10px;border-radius:999px;transform:scale(0);transition:transform .15s;background:var(--primary)}
.btn input[type="radio"]:checked::after,.btn input[type="checkbox"]:checked::after{transform:scale(1)}
.btn--primary{
  background: linear-gradient(180deg, var(--primary) 0%, var(--primary-600) 100%);
  border-color: transparent;color:#fff;font-weight:700;
  box-shadow: 0 10px 24px rgba(37,99,235,.25);
}
.btn--primary:hover{background:linear-gradient(180deg,var(--primary-600) 0%, var(--primary-700) 100%)}

/* Grids */
.grid{display:grid}

/* Mensagens */
#tx-msg{
  background:linear-gradient(180deg,#0c172c 0%, #0a1220 100%);
  border:1px solid var(--border);
  border-left:4px solid var(--accent);
  border-radius:12px;color:#e2e8f0; padding:10px;
}

/* Tabela (ecrã Transações) */
table{width:100%; border-collapse:collapse; font-size:.93rem}
thead{background:#0f1a2d}
th{font-weight:700;color:#dbe3ef;text-align:left;padding:10px;border-bottom:1px solid var(--border)}
td{padding:10px;border-bottom:1px solid var(--border);white-space:nowrap}
tbody tr:hover{background:rgba(255,255,255,.02)}
.badge{
  display:inline-flex;align-items:center;gap:6px;
  padding:.22rem .55rem;border-radius:999px;
  border:1px solid rgba(255,255,255,.08);
  background:#0a1220;color:#d1d5db;font-size:.75rem;font-weight:700;
}
.badge-muted{color:var(--muted);font-size:.75rem}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(2,6,23,.65);display:grid;place-items:center;z-index:50}
.modal__card{
  width:min(680px, 92vw);
  background:linear-gradient(180deg,#0f172a 0%, #0c1426 100%);
  border:1px solid var(--border);border-radius:var(--radius-lg);
  box-shadow:var(--shadow);padding:18px;
}
.modal__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.modal__title{font-weight:800}
.modal__close{
  width:38px;height:38px;border-radius:12px;border:1px solid var(--border);
  background:#0b1324;color:#e5e7eb;cursor:pointer
}
.modal__close:hover{background:#0c172c}

/* Overlay de auth */
.auth-overlay{
  position:fixed;inset:0;display:grid;place-items:center;z-index:60;
  background: radial-gradient(800px 500px at 15% 0%, rgba(37,99,235,.09) 0%, rgba(2,6,23,.82) 60%, rgba(2,6,23,.9) 100%);
  backdrop-filter: blur(6px);
}
.auth-card{
  width:min(420px, 92vw);
  background:linear-gradient(180deg,#0e162b 0%, #0c1426 100%);
  border:1px solid var(--border);
  border-radius:20px;padding:22px 18px;box-shadow:var(--shadow)
}
.auth-card h2{margin:0 0 12px}
.auth-switch{margin-top:10px;color:var(--muted)}
.link{background:none;border:none;color:var(--primary);cursor:pointer;padding:0}
.link:hover{text-decoration:underline}

/* Utilitários */
.hidden{display:none !important}
.rounded-md{border-radius:var(--radius)}
.row-note{color:var(--muted);font-size:.9rem}

/* Focus acessível */
:focus-visible{outline:3px solid var(--ring);outline-offset:2px;border-radius:10px}

/* Responsive refinements */
@media (min-width: 740px){
  .filters-grid{display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:8px}
}
@media (max-width: 739px){
  .brand__subtitle{display:none}
  th:nth-child(6), td:nth-child(6), /* Conta */
  th:nth-child(8), td:nth-child(8)  /* Localização */ {display:none}
}

/* Destaques rápidos */
.label-strong{color:#fff}
.label-strong::after{content:"*";color:var(--warning);margin-left:6px;font-weight:800}
.value-pos{color:#16a34a;font-weight:800}
.value-neg{color:#ef4444;font-weight:800}

</style>