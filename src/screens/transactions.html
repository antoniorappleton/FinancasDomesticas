<section class="card">
  <h2 class="section-title">Transações</h2>

  <!-- Filtros -->
  <div class="filters-grid">
  <label>
    <span class="sr-only">Pesquisar</span>
    <input id="flt-search" type="text" placeholder="Pesquisar descrição, categoria, localização…" />
  </label>

  <label>
    <span class="sr-only">Tipo</span>
    <select id="flt-type">
      <option value="all">Todos os tipos</option>
      <option value="INCOME">Receita</option>
      <option value="EXPENSE">Despesa</option>
      <option value="SAVINGS">Poupança</option>
    </select>
  </label>

  <label>
    <span class="sr-only">Status</span>
    <select id="flt-status">
      <option value="all">Todos os status</option>
    </select>
  </label>

  <label>
    <span class="sr-only">Mês</span>
    <input id="flt-month" type="month" />
  </label>
</div>


  <div class="actions" style="margin-top:10px; display:flex; gap:8px; flex-wrap: wrap;">
    <button id="btn-refresh" class="btn">Atualizar</button>
    <a href="#/new" class="btn btn-primary">+ Nova</a>
  </div>
</section>

<section class="card" style="overflow:auto">
  <div class="rounded-md" style="border:1px solid var(--border)">
    <table style="width:100%; border-collapse:collapse">
      <thead style="background:#f8fafc">
        <tr>
          <th style="text-align:left; padding:10px; border-bottom:1px solid var(--border)">Data</th>
          <th style="text-align:left; padding:10px; border-bottom:1px solid var(--border)">Tipo</th>
          <th style="text-align:right; padding:10px; border-bottom:1px solid var(--border)">Valor</th>
          <th style="text-align:left; padding:10px; border-bottom:1px solid var(--border)">Categoria</th>
          <th style="text-align:left; padding:10px; border-bottom:1px solid var(--border)">Descrição</th>
          <th style="text-align:left; padding:10px; border-bottom:1px solid var(--border)">Conta</th>
          <th style="text-align:left; padding:10px; border-bottom:1px solid var(--border)">Status</th>
          <th style="text-align:left; padding:10px; border-bottom:1px solid var(--border)">Localização</th>
        </tr>
      </thead>
      <tbody id="tx-tbody">
        <!-- linhas via JS -->
      </tbody>
    </table>
  </div>

  <div id="tx-summary" class="row-note" style="margin-top:8px"></div>

  <div class="actions" style="margin-top:10px">
    <button id="btn-load-more" class="btn">Carregar mais</button>
  </div>
</section>

<!-- Modal Editar -->
<section id="tx-edit-modal" class="modal" hidden>
  <div class="modal__card">
    <header class="modal__header">
      <div>
        <div class="modal__title">Editar transação</div>
        <div id="tx-edit-meta" class="badge-muted"></div>
      </div>
      <button class="modal__close" data-close>&times;</button>
    </header>

    <div class="form-grid" style="display:grid; grid-template-columns:1fr 1fr; gap:10px">
      <label>Data <input id="ed-date" type="date" required /></label>
      <label>Valor (€) <input id="ed-amount" type="number" step="0.01" min="0.01" required /></label>

      <label>Conta
        <select id="ed-account"></select>
      </label>
      <label>Regularidade
        <select id="ed-regularity"></select>
      </label>

      <label>Tipo
        <select id="ed-type" disabled></select>
      </label>
      <label>Categoria
        <select id="ed-category"></select>
      </label>

      <label>Método
        <select id="ed-method"></select>
      </label>
      <label>Status
        <select id="ed-status"></select>
      </label>

      <label>Natureza
        <select id="ed-nature">
          <option value="">(usar predefinição da categoria)</option>
          <option value="fixed">Fixa</option>
          <option value="variable">Variável</option>
        </select>
      </label>

      <label style="grid-column:1/-1">Descrição
        <input id="ed-desc" type="text" />
      </label>
      <label>Localização
        <input id="ed-loc" type="text" />
      </label>
      <label>Notas
        <textarea id="ed-notes"></textarea>
      </label>
    </div>

    <div id="ed-hint" class="row-note"></div>

    <div class="actions" style="display:flex; gap:8px; justify-content:flex-end; margin-top:12px">
      <button id="ed-delete" class="btn" style="border-color:#ef4444;color:#ef4444">Eliminar</button>
      <button id="ed-cancel" class="btn">Cancelar</button>
      <button id="ed-save" class="btn btn-primary">Guardar</button>
    </div>
  </div>
</section>

<script type="module" src="/src/main.js?v=v7"></script>
