<section class="card section-toggle-card">
  <div class="card-header section-toggle-header">
    <h2 class="section-title" style="margin: 0">Criar Metas de poupança</h2>
    <span class="chevron-anim">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </span>
  </div>

  <div class="card-body">
    <div class="form-grid" style="margin-top: 16px">
      <label
        >Título
        <input
          id="obj-title"
          type="text"
          placeholder="Ex.: Despesas Alimentação"
        />
      </label>

      <label
        >Tipo
        <select id="obj-type">
          <option value="budget_cap" selected>Teto mensal (despesa)</option>
          <option value="savings_goal">Meta de poupança</option>
        </select>
      </label>

      <label id="obj-cat-wrap"
        >Categoria (opcional para teto geral)
        <select id="obj-category"></select>
      </label>

      <label id="obj-cap-wrap"
        >Teto mensal (€)
        <input
          id="obj-monthly-cap"
          type="number"
          inputmode="decimal"
          step="0.01"
        />
      </label>

      <label id="obj-target-wrap" class="hidden"
        >Meta de poupança (€)
        <input id="obj-target" type="number" inputmode="decimal" step="0.01" />
      </label>

      <label
        >Data limite (opcional)
        <input id="obj-due" type="date" />
      </label>

      <label class="col-span-3"
        >Notas
        <textarea id="obj-notes" placeholder="Observações…"></textarea>
      </label>
    </div>

    <div class="actions" style="margin-top: 8px">
      <button id="obj-save" class="btn btn--primary">Guardar objetivo</button>
    </div>
  </div>
</section>

<!-- SUGESTÕES RÁPIDAS -->
<section class="card section-toggle-card">
  <div class="card-header section-toggle-header">
    <h2
      class="section-title"
      style="margin: 0; display: flex; align-items: center; gap: 8px"
    >
      <span>Sugestões rápidas</span>
      <button
        id="obj-sugg-refresh"
        class="icon-btn"
        title="Gerar outras sugestões"
        style="font-size: 1.2em; z-index: 2"
      >
        ↻
      </button>
    </h2>
    <span class="chevron-anim">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </span>
  </div>
  <div class="card-body">
    <p class="row-note" style="margin-top: 8px">
      Média 6 meses vs gasto do mês. Cria um teto com 1 clique.
    </p>
    <div id="obj-suggestions" class="obj-suggs-grid"></div>
  </div>
</section>

<!-- LISTA -->
<section class="card section-toggle-card">
  <div class="card-header section-toggle-header">
    <h2 class="section-title" style="margin: 0">As minhas Metas</h2>
    <span class="chevron-anim">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </span>
  </div>
  <div class="card-body">
    <p id="obj-summary" class="row-note" style="margin-top: 8px"></p>
    <div id="obj-list" class="grid"></div>
  </div>
</section>

<!-- MODAL EDITAR -->
<div id="obj-edit-modal" class="modal" hidden>
  <div class="modal__card">
    <div class="modal__header">
      <strong class="modal__title">Editar objetivo</strong>
      <button class="modal__close" type="button" data-close>×</button>
    </div>

    <div class="form-grid">
      <input id="ed-id" type="hidden" />
      <label
        >Título
        <input id="ed-title" type="text" />
      </label>
      <label
        >Tipo
        <select id="ed-type">
          <option value="budget_cap">Teto mensal (despesa)</option>
          <option value="savings_goal">Meta de poupança</option>
        </select>
      </label>
      <label
        >Categoria (opcional)
        <select id="ed-category"></select>
      </label>
      <label
        >Teto mensal (€)
        <input id="ed-monthly-cap" type="number" step="0.01" />
      </label>
      <label
        >Meta de poupança (€)
        <input id="ed-target" type="number" step="0.01" />
      </label>
      <label
        >Acumulado (€)
        <input id="ed-current" type="number" step="0.01" />
      </label>
      <label
        >Data limite
        <input id="ed-due" type="date" />
      </label>
      <label
        >Ativo?
        <select id="ed-active">
          <option value="true">Sim</option>
          <option value="false">Não</option>
        </select>
      </label>
      <label class="col-span-3"
        >Notas
        <textarea id="ed-notes"></textarea>
      </label>
    </div>

    <div class="actions" style="margin-top: 10px">
      <button
        id="ed-delete"
        class="btn"
        style="border-color: #ef4444; color: #ef4444"
      >
        Eliminar
      </button>
      <div style="flex: 1"></div>
      <button id="ed-cancel" class="btn">Cancelar</button>
      <button id="ed-save" class="btn btn--primary">Guardar</button>
    </div>
  </div>
</div>

<!-- Carteiras: container e modal -->
<section class="card" id="pf-card">
  <div class="card-header">
    <h2 class="section-title" style="margin: 0">Carteiras de Investimento</h2>
  </div>

  <div class="card-body">
    <div
      style="
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        align-items: center;
        margin-top: 16px;
      "
    >
      <button id="pf-new" class="btn btn--primary">Nova carteira</button>
      <span class="row-note"
        >Associa as tuas transações de poupança a carteiras para ver o
        crescimento de cada uma.</span
      >
    </div>

    <div id="pf-list" class="cat-list" style="margin-top: 10px"></div>
  </div>
</section>

<div id="pf-modal" class="modal" hidden>
  <div class="modal__card">
    <header class="modal__header">
      <h3 class="modal__title" id="pf-modal-title">Carteira</h3>
      <button class="modal__close" type="button" aria-label="Fechar">×</button>
    </header>
    <div
      class="grid"
      style="grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 10px"
    >
      <label>Nome <input id="pf-name" type="text" /></label>
      <label
        >Tipo
        <select id="pf-kind">
          <option>Certificados Aforro</option>
          <option>Ações</option>
          <option>ETFs</option>
          <option>Depósito</option>
          <option>Outro</option>
        </select>
      </label>
      <label
        >Valor investido inicial (€)
        <input type="number" id="pf-initial" placeholder="ex: 1500" />
      </label>
      <label
        >Data de início
        <input type="date" id="pf-start" value="" />
      </label>
      <label
        >Taxa anual (%) <input id="pf-apr" type="number" step="0.01" min="0"
      /></label>
      <label
        >Capitalização
        <select id="pf-comp">
          <option value="monthly" selected>Mensal</option>
          <option value="annual">Anual</option>
        </select>
      </label>
      <label
        >Cor (opcional) <input id="pf-color" type="color" value="#0ea5e9"
      /></label>
      <label style="grid-column: 1/-1"
        >Notas <textarea id="pf-notes"></textarea>
      </label>
      <input id="pf-id" type="hidden" />
    </div>
    <div
      class="actions"
      style="
        margin-top: 10px;
        display: flex;
        gap: 8px;
        justify-content: flex-end;
      "
    >
      <button class="btn" id="pf-del">Eliminar</button>
      <button class="btn btn--primary" id="pf-save">Guardar</button>
    </div>
  </div>
</div>
